<?xml version="1.0" encoding="UTF-8"?>
<spiderman>
    <!-- 引入脚本文件 -->
    <script src="src/main/resources/parser.js" />
	<target name="百度网页搜索">
		<rule type="regex"><![CDATA[(?=http://www\.baidu\.com/s\?wd\=).[^&]*(&pn\=\d+)?]]></rule>
		<model>
			<field name="分页URL" isForNewTask="1"> 
				<parser xpath="//div[@id='page']//a[@href]" attribute="href" />
				<parser script="addPrefix('http://www.baidu.com')" />
				<parser script="$Java.invoke('cleanPageUrl', $this)" />
			</field>
			<field name="详情URl" isForNewTask="1"> 
				<parser xpath="//div[@id='content_left']//div[@class='result c-container ']//h3//a[@href]" attribute="href" />
			</field>
		</model>
	</target>
	<target name="百度新闻搜索">
		<rule type="regex"><![CDATA[http://news\.baidu\.com/ns\?word\=.[^&]*(&pn\=\d+)?]]></rule>
		<model>
			<field name="分页URL" isForNewTask="1"> 
				<parser xpath="//p[@id='page']//a[@href]" attribute="href" />
				<parser script="addPrefix('http://news.baidu.com')" />
				<parser script="$Java.invoke('cleanPageUrl', $this)" />
			</field>
			<field name="详情URl" isForNewTask="1"> 
				<parser xpath="//div[@id='content_left']//div[@class='result']//h3//a[@href]" attribute="href" />
			</field>
		</model>
	</target>
	<target name="百度知道搜索">
		<rule type="regex"><![CDATA[http://zhidao\.baidu\.com/search\?word\=.[^&]*(&pn\=\d+)?]]></rule>
		<model>
			<field name="分页URL" isForNewTask="1"> 
				<parser xpath="//div[@class='pager']//a[@href]" attribute="href" />
				<parser script="addPrefix('http://zhidao.baidu.com')" />
				<parser script="$Java.invoke('cleanPageUrl', $this)" />
			</field>
			<field name="详情URl" isForNewTask="1"> 
				<parser xpath="//div[@class='list']//dl//dt//a[@href]" attribute="href" />
			</field>
		</model>
	</target>
	<target name="百度知道内容">
		<rule type="start" value="http://zhidao.baidu.com/question/" />
		<model>
			<field name="title">
				<parser xpath="//h1[@accuse='qTitle']//span/text()" />
			</field>
			<field name="question">
				<parser xpath="//pre[@class='line mt-5 q-content']/text()" />
			</field>
			<field name="answers">
				<parser xpath="//div[@class='line content']/text()" />
				<parser script="$this.replace('分享','').replace('评论','').replace('|','')" />
			</field>
			<field name="bestAnswer">
				<parser xpath="//div[@class='wgt-quality mod-shadow']//div[@class='quality-content-detail content']/text()" />
			</field>
		</model>
	</target>
</spiderman>
