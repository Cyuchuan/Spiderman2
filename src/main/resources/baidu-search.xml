<?xml version="1.0" encoding="UTF-8"?>
<spiderman>
    <!-- 引入脚本文件 -->
    <script src="src/main/resources/parser.js" />
	<target name="DigUrl">
		<rule type="regex"><![CDATA[(?=http://www\.baidu\.com/s\?wd\=).[^&;]*(&pn\=\d+)?]]></rule>
		<model>
			<field name="分页URL" isForNewTask="1"> 
				<parser xpath="//div[@id='page']//a[@href]" attribute="href" />
				<!-- 这里的addPrefix方法是在上面引入的JS文件里定义的 -->
				<parser script="addPrefix('http://www.baidu.com')" />
				<!-- 调用函数 -->
				<parser script="$Java.invoke('cleanPageUrl', $this)" />
			</field>
			<field name="详情URl" isForNewTask="1"> 
				<parser xpath="//div[@id='content_left']//div[@class='result c-container ']//h3//a[@href]" attribute="href" />
			</field>
		</model>
	</target>
</spiderman>
